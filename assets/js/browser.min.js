/*
	Browser Detection and Utilities
	Aegis Planner Landing Page
*/

(function() {

	"use strict";

	// Variables.
	var nav = {},
		userAgent = navigator.userAgent.toLowerCase(),
		uid = (function() {
			var i = 0;
			return function() {
				return i++;
			};
		})();

	/**
	 * Browser detection.
	 */

	// Internet Explorer.
	nav.ie = (function() {
		var	v = 3,
			div = document.createElement('div'),
			all = div.getElementsByTagName('i');

		while (
			div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
			all[0]
		);

		return v > 4 ? v : false;
	})();

	// Chrome.
	nav.chrome = userAgent.indexOf('chrome') !== -1;

	// Firefox.
	nav.firefox = userAgent.indexOf('firefox') !== -1;

	// Safari.
	nav.safari = userAgent.indexOf('safari') !== -1 && !nav.chrome;

	// Mobile.
	nav.mobile = userAgent.indexOf('mobile') !== -1;

	// OS.
	nav.os = (function() {
		if (userAgent.indexOf('windows') !== -1)
			return 'windows';
		else if (userAgent.indexOf('mac') !== -1)
			return 'mac';
		else if (userAgent.indexOf('linux') !== -1)
			return 'linux';
		else if (userAgent.indexOf('android') !== -1)
			return 'android';
		else if (userAgent.indexOf('ios') !== -1)
			return 'ios';
		else
			return 'other';
	})();

	// Touch.
	nav.touch = (function() {
		try {
			document.createEvent('TouchEvent');
			return true;
		}
		catch (e) {
			return false;
		}
	})();

	// Mobile browser height fix.
	if (nav.mobile) {
		window.addEventListener('orientationchange', function() {
			setTimeout(function() {
				window.scrollTo(0, 1);
			}, 500);
		});
	}

	// Expose nav object.
	window.browser = nav;

})();