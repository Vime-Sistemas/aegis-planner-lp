/*
	Breakpoints.js
	Responsive breakpoint management
*/

(function() {

	"use strict";

	var	breakpoints = {};

	/**
	 * Set breakpoints.
	 * @param {object} x Breakpoints.
	 */
	function setBreakpoints(x) {
		var	keys = Object.keys(x),
			a, b;

		// Clear existing.
		breakpoints = {};

		// Set breakpoints.
		for (var i = 0; i < keys.length; i++) {
			a = keys[i];
			b = x[a];

			if (typeof b == 'string')
				b = [b, b];

			breakpoints[a] = {
				min: b[1] !== null ? parseInt(b[1]) : null,
				max: b[0] !== null ? parseInt(b[0]) : null
			};
		}
	}

	/**
	 * Get active breakpoint.
	 * @return {string} Breakpoint name.
	 */
	function getActive() {
		var width = window.innerWidth,
			keys = Object.keys(breakpoints),
			x, k;

		for (var i = 0; i < keys.length; i++) {
			k = keys[i];
			x = breakpoints[k];

			if (x.min !== null && width < x.min)
				continue;

			if (x.max !== null && width > x.max)
				continue;

			return k;
		}

		return null;
	}

	/**
	 * Check if breakpoint is active.
	 * @param {string} x Breakpoint name.
	 * @return {bool} True if active, false if not.
	 */
	function isActive(x) {
		return (getActive() == x);
	}

	// Expose.
	window.breakpoints = setBreakpoints;
	window.breakpoints.active = getActive;
	window.breakpoints.is = isActive;

})();